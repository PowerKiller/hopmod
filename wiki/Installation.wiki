#summary Prerequisite and installation details for the latest version of Hopmod (branches/ng) for the latest version of Cube 2:Sauerbraten.
#labels Phase-Deploy,manual,Phase-Requirements

== Operating System ==

You will need to have Linux running if you want to use Hopmod, this is the
operating system Hopmod was developed and tested on.

== C Library Dependencies ==

* GeoIp ([http://www.maxmind.com/app/c Download])<br>
* SQLite3 ([http://www.sqlite.org/download.html Download])<br>
* GNU libmicrohttpd ([ftp://ftp.gnu.org/gnu/libmicrohttpd/libmicrohttpd-0.4.1.tar.gz Download])<br>

All the other libraries used by Hopmod are included with the source distribution.

== Perl modules required by the IRC bot ==

===Base Bot===
* POE::Component::IRC::State<br>
* POE::Component::IRC::Plugin::Connector<br>
* POE::Component::IRC::Plugin::AutoJoin<br>
* POE::Component::IRC::Plugin::FollowTail<br>
* Config::Auto<br>
* LWP::UserAgent<br>
* HTTP::Request<br>

===Player Locator Module===
* IO::Socket<br>
* threads<br>
* threads::shared<br>
* LWP::Simple<br>

== Getting the Source Code ==

[http://code.google.com/p/hopmod/source/checkout SVN checkout]

== Building Hopmod ==

===Create build environment===

Hopmod comes distributed with the source code for a non-standard build tool
called Boost Jam which is used to compile and install everything, for a fresh
copy of Hopmod you will need to compile this tool before you can compile Hopmod.

{{{
./buildtools.sh
aclocal
autoconf
}}}

The first command compiles and installs Boost Jam, the next two commands are
responsible for generating the configure script. If you find aclocal and/or 
autoconf are not found then search and install the Automake package onto your
system.

Once the build tool and configure script exists you shouldn't have to run those
commands again, except for when configure.ac changes, in which case you you run
`autoconf` to regenerate the configure script.

===Compile and installation===

{{{
./configure
./bin/bjam release
}}}

These are the two commands you run everytime to compile the latest revision of
Hopmod. Installation is automatic, with the compiled server program and 
libraries copied to `./bin` directory and the script modules copied to
the `./script/package` directory.

== Configuration ==

The server configuration file exists at `./conf/server.conf` and is written
in CubeScript.

== Startup and Shutdown ==

{{{
./bin/server
}}}

To immediately shutdown the server:

{{{
./bin/server stop
}}}

In the event of a crash the named pipe `serverexec` will be left undeleted. The
server script uses the named pipe to detect if the server is running, when a
crash occurs it will wrongfully detect the server as running when you use the
script to startup. To resolve this issue simply delete the named pipe file.